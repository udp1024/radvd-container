# /etc/radvd/radvd.conf - SAFE DEFAULT / DEMONSTRATION MODE
# 
# PURPOSE: Verify radvd is operational without affecting network clients
# STATUS: Non-invasive, passive monitoring mode
# 
# WARNING: To activate full router advertisements, change AdvSendAdvert to "on"
#          and configure a valid prefix below.

# Global options
option loglevel 5;      # Verbose logging to show activity

# =============================================================================
# INTERFACE CONFIGURATION - DETECT PRIMARY INTERFACE
# =============================================================================

# Use 'eth0' as fallback, but recommend detecting actual interface at runtime
# via: ip -6 route show default | awk '{print $5}' | head -1
interface eth0 {
    
    # -------------------------------------------------------------------------
    # CRITICAL: DISABLED BY DEFAULT - No advertisements sent
    # -------------------------------------------------------------------------
    # Change to "on" to activate router advertisements
    AdvSendAdvert off;          # SAFE: Don't send RAs (passive mode)
    
    # -------------------------------------------------------------------------
    # CONSERVATIVE TIMERS (ignored when AdvSendAdvert is off, but set safely)
    # -------------------------------------------------------------------------
    MinRtrAdvInterval 600;      # 10 minutes minimum (RFC 4861 default: 3 sec)
    MaxRtrAdvInterval 1800;     # 30 minutes maximum (RFC 4861 default: 600 sec)
    
    # -------------------------------------------------------------------------
    # FLAGS: Set conservatively (no impact when not advertising)
    # -------------------------------------------------------------------------
    AdvManagedFlag off;         # SLAAC enabled (if ever activated)
    AdvOtherConfigFlag off;     # No DHCPv6 for other config
    AdvDefaultPreference low;   # Low priority if activated
    
    # -------------------------------------------------------------------------
    # PREFIX: DOCUMENTATION PREFIX (RFC 3849) - SAFE, NON-ROUTABLE
    # -------------------------------------------------------------------------
    # 2001:db8::/32 is reserved for documentation and will never route globally
    # This ensures even if accidentally enabled, no network disruption occurs
    prefix 2001:db8:dead:beef::/64 {
        AdvOnLink off;          # Not on-link (safe default)
        AdvAutonomous off;      # Don't auto-configure addresses
        AdvRouterAddr off;      # Don't use router address
        AdvValidLifetime 0;     # Immediately invalid if seen
        AdvPreferredLifetime 0; # Immediately deprecated if seen
    };
    
    # -------------------------------------------------------------------------
    # RDNSS: LOOPBACK/DOCUMENTATION ADDRESSES ONLY
    # -------------------------------------------------------------------------
    # ::1 is loopback - clients will ignore these as unreachable
    # 2001:db8::53 is documentation address
    RDNSS ::1 2001:db8::53 {
        AdvRDNSSLifetime 0;     # Immediately invalid
    };
    
    # -------------------------------------------------------------------------
    # DNSSL: EXAMPLE DOMAIN (RFC 6761) - SAFE
    # -------------------------------------------------------------------------
    DNSSL invalid {
        AdvDNSSLLifetime 0;     # Immediately invalid
    };
    
    # -------------------------------------------------------------------------
    # ROUTES: NO DEFAULT ROUTE ADVERTISED
    # -------------------------------------------------------------------------
    # Explicitly do not advertise default route
    # route ::/0 { ... }  # INTENTIONALLY OMITTED
};

# =============================================================================
# ADDITIONAL INTERFACES (commented out - safe templates)
# =============================================================================

# Template for secondary interface - fully disabled
# interface eth1 {
#     AdvSendAdvert off;
# };

# Template for VLAN interface - fully disabled  
# interface eth0.100 {
#     AdvSendAdvert off;
# };

# =============================================================================
# MONITORING/STATUS INTERFACE (optional, for admin verification)
# =============================================================================

# Loopback interface - radvd will bind but never send
# Useful for checking "radvd -C /etc/radvd/radvd.conf" returns success
interface lo {
    AdvSendAdvert off;
    
    prefix ::1/128 {
        AdvOnLink off;
        AdvAutonomous off;
    };
};